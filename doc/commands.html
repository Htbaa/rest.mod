<html><head><title>htbaapub.rest reference</title>
<link rel=stylesheet Type=text/css href='../../../../doc/bmxstyle.css'>
</head><body>
<table width=100% cellspacing=0><tr align=center><td class=small>&nbsp;</td>
<td class=small width=1%><b>htbaapub.rest:</b></td>
<td class=small width=1%><a href=#types class=small>Types</a></td>
<td class=small width=1%><a href=#modinfo class=small>Modinfo</a></td>
<td class=small width=1%><a href='../../../../mod/htbaapub.mod/rest.mod/rest.bmx' class=small>Source</a></td>
<td class=small>&nbsp;</td></tr></table>
<h1>htbaapub.rest</h1>
<h1>REST</h1>
<p>This module allows you to interact with a RESTful server.</p>
<h2>Basic usage:</h2>
<pre>
SuperStrict
Local request:TRESTRequest = New TRESTRequest
request.AddHeader("X-API-Key", "KD93DJ03LW20")
<p>
Local headers:String[] = ["username: Htbaa"]
Local response:TRESTResponse = request.Call("http://localhost/rest/account/new", headers, "PUT")
Print "Returned HTTP Status code from REST server is: " + response.responseCode
Print "Some header returned from REST server is: " + response.GetHeader("secret-message")
</pre>
<p>
<h2>Difference between AddHeader() and adding headers through Call()</h2>
<p>Any header set with AddHeader() will be added to every request done by Call(). 
Any headers added with Call() will only be used for that particular request. 
So any headers set with AddHeader() are global for the TRESTRequest object, and those set with 
Call() only effect the current request.</p>
<h2><a name=types></a>Types Summary</h2><table class=doc width=100%>
<tr><td class=docleft width=1%><a href=#TRESTException>TRESTException</a></td><td class=docright>
Exception for TREST.
</td></tr>
<tr><td class=docleft width=1%><a href=#TRESTRequest>TRESTRequest</a></td><td class=docright>
A REST request object.
</td></tr>
<tr><td class=docleft width=1%><a href=#TRESTRequestException>TRESTRequestException</a></td><td class=docright>
Exception for TRESTRequest.
</td></tr>
<tr><td class=docleft width=1%><a href=#TRESTResponse>TRESTResponse</a></td><td class=docright>
A REST Response object.
</td></tr>
<tr><td class=docleft width=1%><a href=#TRESTResponseException>TRESTResponseException</a></td><td class=docright>
Exception for TRESTResponse.
</td></tr>
<tr><td class=docleft width=1%><a href=#TURLFunc>TURLFunc</a></td><td class=docright>
URL Encode/Decode helper functions.
</td></tr>
</table>
<h2
 id=typesdet>Types
</h2>
<table class=doc width=100% cellspacing=3 id=TRESTException>
<tr><td class=doctop colspan=2>Type TRESTException Abstract</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Exception for TREST.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TRESTException_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#SetMessage>SetMessage</a></td><td class=docright>
Sets message.
</td></tr>
<tr><td class=docleft width=1%><a href=#ToString>ToString</a></td><td class=docright>
Return message.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=SetMessage>
<tr><td class=doctop colspan=2>Method SetMessage:TRESTException(message:String)</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>TRESTException.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Sets message.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=ToString>
<tr><td class=doctop colspan=2>Method ToString:String()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Return message.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TRESTRequest>
<tr><td class=doctop colspan=2>Type TRESTRequest</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>A REST request object.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TRESTRequest_globals></a>Globals Summary</th></tr><tr><td colspan=2>
<a href=#CAInfo>CAInfo</a>
</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TRESTRequest_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#AddHeader>AddHeader</a></td><td class=docright>
Add a header.
</td></tr>
<tr><td class=docleft width=1%><a href=#Call>Call</a></td><td class=docright>
Send request to REST server.
</td></tr>
<tr><td class=docleft width=1%><a href=#RemoveHeader>RemoveHeader</a></td><td class=docright>
Remove a single header.
</td></tr>
<tr><td class=docleft width=1%><a href=#RemoveHeaders>RemoveHeaders</a></td><td class=docright>
Clear all headers.
</td></tr>
<tr><td class=docleft width=1%><a href=#SetProgressCallback>SetProgressCallback</a></td><td class=docright>
Set a progress callback function to use when uploading or downloading data.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CAInfo>
<tr><td class=doctop colspan=2>Global CAInfo:String</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Optionally set the path to a certification bundle to validate the SSL certificate of the REST Server.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>If you want to validate the SSL certificate of the REST server you can set the path to your certificate bundle here.
This needs to be set BEFORE creating a TRESTRequest object.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=AddHeader>
<tr><td class=doctop colspan=2>Method AddHeader(name:String, value:String)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Add a header.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Preset a header which will then be used when invoking Call()</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=Call>
<tr><td class=doctop colspan=2>Method Call:TRESTResponse(url:String, headers:String[] = Null, requestMethod:String = "GET", userData:Object = Null)</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>TRESTResponse object.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Send request to REST server.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Used to send requests. Sets header data and content data. Returns TRESTResponse object.<br>
Any headers set in <b>headers</b> array won't be added to the objects headers TMap.<br>
This allows you to define a TRESTRequest object with a number of default/preset headers
and any additional can be added here. Do note that any headers set with AddHeader() will be
added to the request.<br>
<br>
If <b>userData</b> is a TStream and <b>requestMethod</b> has been set to PUT then libcurlssl will read
the TStream and push it's content to the REST server. After the request has been made the
TStream will be closed.<br>
<br>
If an error occurs with the request a TRESTRequestException will be thrown.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=RemoveHeader>
<tr><td class=doctop colspan=2>Method RemoveHeader(name:String)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Remove a single header.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright><b>name</b> is the name of the header.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=RemoveHeaders>
<tr><td class=doctop colspan=2>Method RemoveHeaders()</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Clear all headers.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Clears all headers that have been set with AddHeader()</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=SetProgressCallback>
<tr><td class=doctop colspan=2>Method SetProgressCallback(progressFunction:Int(data:Object, dltotal:Double, dlnow:Double, ultotal:Double, ulnow:Double), progressObject:Object = Null)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Set a progress callback function to use when uploading or downloading data.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>This is passed to cURL with setProgressCallback(). See bah.libcurlssl for more information.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TRESTRequestException>
<tr><td class=doctop colspan=2>Type TRESTRequestException Extends TRESTException</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Exception for TRESTRequest.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TRESTResponse>
<tr><td class=doctop colspan=2>Type TRESTResponse</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>A REST Response object.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>A TRESTResponse object is what will be returned by TRESTRequest.Call()</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TRESTResponse_fields></a>Fields Summary</th></tr><tr><td colspan=2>
<a href=#content>content</a>
, 
<a href=#headers>headers</a>
, 
<a href=#responseCode>responseCode</a>
</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TRESTResponse_methods></a>Methods Summary</th></tr>
<tr><td class=docleft width=1%><a href=#GetHeader>GetHeader</a></td><td class=docright>
Retrieve header from response.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=content>
<tr><td class=doctop colspan=2>Field content:String</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Content returned by REST server.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=headers>
<tr><td class=doctop colspan=2>Field headers:TMap = New TMap</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Headers returned by REST server.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=responseCode>
<tr><td class=doctop colspan=2>Field responseCode:Int</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>HTTP Status code returned by REST server.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=GetHeader>
<tr><td class=doctop colspan=2>Method GetHeader:String(headerName:String, throwOnError:Byte = False)</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>Value of header.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Retrieve header from response.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Retrieve a header by the name of <b>headerName</b><br>
When <b>throwOnError</b> is <b>True</b> a TRESTResponseException will be thrown when the header doesn't exist.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TRESTResponseException>
<tr><td class=doctop colspan=2>Type TRESTResponseException Extends TRESTException</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Exception for TRESTResponse.</td></tr>
</table>
<br>
<table class=doc width=100% cellspacing=3 id=TURLFunc>
<tr><td class=doctop colspan=2>Type TURLFunc</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>URL Encode/Decode helper functions.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>These routines were taken from public domain<br>
at the <a href="http://www.blitzmax.com/codearcs/codearcs.php?code=1581">BlitzMax Code Archives</a>.<br>
The original author is Perturbatio/Kris Kelly but has been wrapped by me.</td></tr>
</table>
<table class=doc width=90% align=center><tr ><th class=doctop colspan=2 align=left><a name=TURLFunc_functions></a>Functions Summary</th></tr>
<tr><td class=docleft width=1%><a href=#CreateQueryString>CreateQueryString</a></td><td class=docright>
Create a query string from the given values.
</td></tr>
<tr><td class=docleft width=1%><a href=#DecodeString>DecodeString</a></td><td class=docright>
URL Decode a string.
</td></tr>
<tr><td class=docleft width=1%><a href=#EncodeString>EncodeString</a></td><td class=docright>
URL Encode a string.
</td></tr>
<tr><td class=docleft width=1%><a href=#HexToInt>HexToInt</a></td><td class=docright>
Translate a Hexadecimal to an Decimal.
</td></tr>
<tr><td class=docleft width=1%><a href=#IntToHexString>IntToHexString</a></td><td class=docright>
Translate a Decimal to a Hexadecimal.
</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=CreateQueryString>
<tr><td class=doctop colspan=2>Function CreateQueryString:String(params:String[])</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>String.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Create a query string from the given values.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright>Expects an array with strings. Each entry should be something like var=value<br>
Every entry should already be URL Encoded!</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=DecodeString>
<tr><td class=doctop colspan=2>Function DecodeString:String(EncStr:String)</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>URL Decoded string.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>URL Decode a string.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright><b>EncStr</b> should be a URL Encoded string.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=EncodeString>
<tr><td class=doctop colspan=2>Function EncodeString:String(value:String, EncodeUnreserved:Int = False, UsePlusForSpace:Int = True)</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>URL Encoded string.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>URL Encode a string.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright><b>value</b> is what you want URL Encoded<br>
<b>EncodeUnreserved</b>, when set to <b>True</b>, will make sure everything will be encoded<br>
<b>UsePlusForSpace</b>, when set to <b>True</b>, will translate a space to <b></b>+, instead of <b></b>%20.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=HexToInt>
<tr><td class=doctop colspan=2>Function HexToInt:Int( HexStr:String )</td></tr>
<tr><td class=docleft width=1%>Returns</td><td class=docright>Integer.</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Translate a Hexadecimal to an Decimal.</td></tr>
<tr><td class=docleft width=1%>Information</td><td class=docright><b>HexStr</b> is your string with a Hexadecimal.</td></tr>
</table>
<table class=doc width=100% cellspacing=3 id=IntToHexString>
<tr><td class=doctop colspan=2>Function IntToHexString:String(val:Int, chars:Int = 2)</td></tr>
<tr><td class=docleft width=1%>Description</td><td class=docright>Translate a Decimal to a Hexadecimal.</td></tr>
</table>
<br>
<h2 id=modinfo>Module Information</h2>
<table width=100%>
<tr><th width=1%>Name</th><td>htbaapub.rest</td></tr>
<tr><th width=1%>Version</th><td>1.00</td></tr>
<tr><th width=1%>Author</th><td>Christiaan Kras</td></tr>
<tr><th width=1%>Special thanks to</th><td>Bruce A Henderson, Kris Kelly</td></tr>
<tr><th width=1%>Git repository</th><td><a href='http://github.com/Htbaa/rest.mod/'>http://github.com/Htbaa/rest.mod/</a></td></tr>
</body></html>
